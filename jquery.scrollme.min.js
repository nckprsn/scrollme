// ----------------------------------------------------------------------------------------------------
// ScrollMe
// A jQuery plugin for adding simple scrolling effects to web pages
// http://scrollme.nckprsn.com
// ----------------------------------------------------------------------------------------------------
(function(){$(function(){var g=$(document);var d=$(window);var k=0;var b=0;var m=0;var f=0;var h=-1;var a=[];var j=[];var c={opacity:1,translatex:0,translatey:0,translatez:0,rotatex:0,rotatey:0,rotatez:0,scale:1};var l={linear:function(n){return n},easeout:function(n){return n*n*n},easein:function(n){n=1-n;return 1-(n*n*n)},easeinout:function(n){if(n<0.5){return(4*n*n*n)}else{n=1-n;return 1-(4*n*n*n)}}};init=function(){init_elements();on_resize();setInterval(update,10);d.resize(on_resize);window.addEventListener("orientationchange",function(){on_resize()},false);d.load(function(){setTimeout(function(){on_resize()},1000)})};init_elements=function(){$(".scrollme").each(function(){var n={};n.element=$(this);var o=[];$(this).find(".animateme").each(function(){var q={};q.element=$(this);q.when=q.element.data("when");q.from=q.element.data("from");q.to=q.element.data("to");if(q.element.is("[data-easing]")){q.easing=l[q.element.data("easing")]}else{q.easing=l.easeout}var p={};if(q.element.is("[data-opacity]")){p.opacity=q.element.data("opacity")}if(q.element.is("[data-translatex]")){p.translatex=q.element.data("translatex")}if(q.element.is("[data-translatey]")){p.translatey=q.element.data("translatey")}if(q.element.is("[data-translatez]")){p.translatez=q.element.data("translatez")}if(q.element.is("[data-rotatex]")){p.rotatex=q.element.data("rotatex")}if(q.element.is("[data-rotatey]")){p.rotatey=q.element.data("rotatey")}if(q.element.is("[data-rotatez]")){p.rotatez=q.element.data("rotatez")}if(q.element.is("[data-scale]")){p.scale=q.element.data("scale")}q.properties=p;o.push(q)});n.effects=o;a.push(n)})};update=function(){window.requestAnimationFrame(function(){update_viewport_position();if(h!=m){update_elements_in_view();animate()}h=m})};animate=function(){var F=j.length;for(i=0;i<F;i++){var p=j[i];var n=p.effects.length;for(e=0;e<n;e++){var A=p.effects[e];switch(A.when){case"view":var v=p.top-b;var t=p.bottom;break;case"exit":var v=p.bottom-b;var t=p.bottom;break;default:var v=p.top-b;var t=p.top;break}if(v<0){v=0}if(t>(k-b)){t=k-b}var o=(m-v)/(t-v);var B=A.from;var q=A.to;var u=q-B;var r=(o-B)/u;var z=A.easing(r);var s=animate_value(o,z,B,q,A,"opacity");var x=animate_value(o,z,B,q,A,"translatey");var y=animate_value(o,z,B,q,A,"translatex");var w=animate_value(o,z,B,q,A,"translatez");var E=animate_value(o,z,B,q,A,"rotatex");var D=animate_value(o,z,B,q,A,"rotatey");var C=animate_value(o,z,B,q,A,"rotatez");var G=animate_value(o,z,B,q,A,"scale");A.element.css({opacity:s,transform:"translate3d( "+y+"px , "+x+"px , "+w+"px ) rotateX( "+E+"deg ) rotateY( "+D+"deg ) rotateZ( "+C+"deg ) scale( "+G+" )"})}}};animate_value=function(r,q,s,t,w,v){var p=c[v];if(!(v in w.properties)){return p}var n=w.properties[v];var o=(t>s)?true:false;if(r<s&&o){return p}if(r>t&&o){return n}if(r>s&&!o){return p}if(r<t&&!o){return n}var u=p+(q*(n-p));switch(v){case"opacity":u=u.toFixed(2);break;case"translatex":u=u.toFixed(0);break;case"translatey":u=u.toFixed(0);break;case"translatez":u=u.toFixed(0);break;case"rotatex":u=u.toFixed(1);break;case"rotatey":u=u.toFixed(1);break;case"rotatez":u=u.toFixed(1);break;case"scale":u=u.toFixed(3);break;default:break}return u};update_viewport_position=function(){m=d.scrollTop();f=m+b};update_elements_in_view=function(){j=[];var n=a.length;for(i=0;i<n;i++){if((a[i].top<f)&&(a[i].bottom>m)){j.push(a[i])}}};on_resize=function(){update_viewport();update_element_heights();update_viewport_position();update_elements_in_view();animate()};update_viewport=function(){k=g.height();b=d.height()};update_element_heights=function(){var o=a.length;for(i=0;i<o;i++){var p=a[i].element.outerHeight();var n=a[i].element.offset();a[i].height=p;a[i].top=n.top;a[i].bottom=n.top+p}};g.ready(function(){init()})})}).call(this);
